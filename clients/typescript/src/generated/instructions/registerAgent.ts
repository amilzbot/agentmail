/**
 * This code was AUTOGENERATED using the Codama library.
 * Please DO NOT EDIT THIS FILE, instead use visitors
 * to add features, then rerun Codama to update it.
 *
 * @see https://github.com/codama-idl/codama
 */

import { combineCodec, getStructDecoder, getStructEncoder, getU8Decoder, getU8Encoder, transformEncoder, type AccountMeta, type AccountSignerMeta, type Address, type Codec, type Decoder, type Encoder, type Instruction, type InstructionWithAccounts, type InstructionWithData, type ReadonlyAccount, type ReadonlySignerAccount, type ReadonlyUint8Array, type TransactionSigner, type WritableAccount, type WritableSignerAccount } from '@solana/kit';
import { AGENTMAIL_PROGRAM_ADDRESS } from '../programs';
import { getAccountMetaFactory, type ResolvedAccount } from '../shared';
import { getStringDecoder, getStringEncoder, type String, type StringArgs } from '../types';

export const REGISTER_AGENT_DISCRIMINATOR = 3;

export function getRegisterAgentDiscriminatorBytes() { return getU8Encoder().encode(REGISTER_AGENT_DISCRIMINATOR); }

export type RegisterAgentInstruction<TProgram extends string = typeof AGENTMAIL_PROGRAM_ADDRESS, TAccountPayer extends string | AccountMeta<string> = string, TAccountAgentAuthority extends string | AccountMeta<string> = string, TAccountAgentRegistry extends string | AccountMeta<string> = string, TAccountSystemProgram extends string | AccountMeta<string> = "11111111111111111111111111111111", TAccountAgentmailProgram extends string | AccountMeta<string> = string, TRemainingAccounts extends readonly AccountMeta<string>[] = []> =
Instruction<TProgram> & InstructionWithData<ReadonlyUint8Array> & InstructionWithAccounts<[TAccountPayer extends string ? WritableSignerAccount<TAccountPayer> & AccountSignerMeta<TAccountPayer> : TAccountPayer, TAccountAgentAuthority extends string ? ReadonlySignerAccount<TAccountAgentAuthority> & AccountSignerMeta<TAccountAgentAuthority> : TAccountAgentAuthority, TAccountAgentRegistry extends string ? WritableAccount<TAccountAgentRegistry> : TAccountAgentRegistry, TAccountSystemProgram extends string ? ReadonlyAccount<TAccountSystemProgram> : TAccountSystemProgram, TAccountAgentmailProgram extends string ? ReadonlyAccount<TAccountAgentmailProgram> : TAccountAgentmailProgram, ...TRemainingAccounts]>;

export type RegisterAgentInstructionData = { discriminator: number; bump: number; name: String; inboxUrl: String;  };

export type RegisterAgentInstructionDataArgs = { bump: number; name: StringArgs; inboxUrl: StringArgs;  };

export function getRegisterAgentInstructionDataEncoder(): Encoder<RegisterAgentInstructionDataArgs> {
    return transformEncoder(getStructEncoder([['discriminator', getU8Encoder()], ['bump', getU8Encoder()], ['name', getStringEncoder()], ['inboxUrl', getStringEncoder()]]), (value) => ({ ...value, discriminator: REGISTER_AGENT_DISCRIMINATOR }));
}

export function getRegisterAgentInstructionDataDecoder(): Decoder<RegisterAgentInstructionData> {
    return getStructDecoder([['discriminator', getU8Decoder()], ['bump', getU8Decoder()], ['name', getStringDecoder()], ['inboxUrl', getStringDecoder()]]);
}

export function getRegisterAgentInstructionDataCodec(): Codec<RegisterAgentInstructionDataArgs, RegisterAgentInstructionData> {
    return combineCodec(getRegisterAgentInstructionDataEncoder(), getRegisterAgentInstructionDataDecoder());
}

export type RegisterAgentInput<TAccountPayer extends string = string, TAccountAgentAuthority extends string = string, TAccountAgentRegistry extends string = string, TAccountSystemProgram extends string = string, TAccountAgentmailProgram extends string = string> =  {
  payer: TransactionSigner<TAccountPayer>;
agentAuthority: TransactionSigner<TAccountAgentAuthority>;
agentRegistry: Address<TAccountAgentRegistry>;
systemProgram?: Address<TAccountSystemProgram>;
agentmailProgram: Address<TAccountAgentmailProgram>;
bump: RegisterAgentInstructionDataArgs["bump"];
name: RegisterAgentInstructionDataArgs["name"];
inboxUrl: RegisterAgentInstructionDataArgs["inboxUrl"];
}

export function getRegisterAgentInstruction<TAccountPayer extends string, TAccountAgentAuthority extends string, TAccountAgentRegistry extends string, TAccountSystemProgram extends string, TAccountAgentmailProgram extends string, TProgramAddress extends Address = typeof AGENTMAIL_PROGRAM_ADDRESS>(input: RegisterAgentInput<TAccountPayer, TAccountAgentAuthority, TAccountAgentRegistry, TAccountSystemProgram, TAccountAgentmailProgram>, config?: { programAddress?: TProgramAddress } ): RegisterAgentInstruction<TProgramAddress, TAccountPayer, TAccountAgentAuthority, TAccountAgentRegistry, TAccountSystemProgram, TAccountAgentmailProgram> {
  // Program address.
const programAddress = config?.programAddress ?? AGENTMAIL_PROGRAM_ADDRESS;

 // Original accounts.
const originalAccounts = { payer: { value: input.payer ?? null, isWritable: true }, agentAuthority: { value: input.agentAuthority ?? null, isWritable: false }, agentRegistry: { value: input.agentRegistry ?? null, isWritable: true }, systemProgram: { value: input.systemProgram ?? null, isWritable: false }, agentmailProgram: { value: input.agentmailProgram ?? null, isWritable: false } }
const accounts = originalAccounts as Record<keyof typeof originalAccounts, ResolvedAccount>;


// Original args.
const args = { ...input,  };


// Resolve default values.
if (!accounts.systemProgram.value) {
accounts.systemProgram.value = '11111111111111111111111111111111' as Address<'11111111111111111111111111111111'>;
}

const getAccountMeta = getAccountMetaFactory(programAddress, 'programId');
return Object.freeze({ accounts: [getAccountMeta(accounts.payer), getAccountMeta(accounts.agentAuthority), getAccountMeta(accounts.agentRegistry), getAccountMeta(accounts.systemProgram), getAccountMeta(accounts.agentmailProgram)], data: getRegisterAgentInstructionDataEncoder().encode(args as RegisterAgentInstructionDataArgs), programAddress } as RegisterAgentInstruction<TProgramAddress, TAccountPayer, TAccountAgentAuthority, TAccountAgentRegistry, TAccountSystemProgram, TAccountAgentmailProgram>);
}

export type ParsedRegisterAgentInstruction<TProgram extends string = typeof AGENTMAIL_PROGRAM_ADDRESS, TAccountMetas extends readonly AccountMeta[] = readonly AccountMeta[]> = { programAddress: Address<TProgram>;
accounts: {
payer: TAccountMetas[0];
agentAuthority: TAccountMetas[1];
agentRegistry: TAccountMetas[2];
systemProgram: TAccountMetas[3];
agentmailProgram: TAccountMetas[4];
};
data: RegisterAgentInstructionData; };

export function parseRegisterAgentInstruction<TProgram extends string, TAccountMetas extends readonly AccountMeta[]>(instruction: Instruction<TProgram> & InstructionWithAccounts<TAccountMetas> & InstructionWithData<ReadonlyUint8Array>): ParsedRegisterAgentInstruction<TProgram, TAccountMetas> {
  if (instruction.accounts.length < 5) {
  // TODO: Coded error.
  throw new Error('Not enough accounts');
}
let accountIndex = 0;
const getNextAccount = () => {
  const accountMeta = (instruction.accounts as TAccountMetas)[accountIndex]!;
  accountIndex += 1;
  return accountMeta;
}
  return { programAddress: instruction.programAddress, accounts: { payer: getNextAccount(), agentAuthority: getNextAccount(), agentRegistry: getNextAccount(), systemProgram: getNextAccount(), agentmailProgram: getNextAccount() }, data: getRegisterAgentInstructionDataDecoder().decode(instruction.data) };
}